<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>idlesign</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap4.min.css">

</head>
<body>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap4.min.js"></script>


    <div class="container">
        <div class="row mt-4">
            <div class="col"><h1><a href="https://github.com/idlesign">Igor Starikov / idlesign</a></h1></div>
        </div>
        <div class="row mt-4">
            <div class="col">
                <div class="card bg-light">
                    <div class="card-body">
                        <p class="card-text"><a href="http://idlesign.github.io/idletalks">Talks & slides (primarily in Russian)</a></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4 mb-5">
            <div class="col">
                <h4>Interesting info for some maintained apps</h4>
                <table id="table-apps" class="display" width="100%"></table>
            </div>
        </div>
    </div>

    <script type="application/javascript">

        $(function(){

            var apps = [
                    'django-sitetree',
                    'django-sitemessage',
                    'django-sitegate',
                    'django-yaturbo',
                    'django-admirarchy',
                    'django-siteflags',
                    'django-oauthost',
                    'django-sitecats',
                    'django-sitemetrics',
                    'django-siteblocks',
                    'django-sitetables',
                    'django-siteprefs',
                    'django-xross',
                    'django-etc',
                    'django-dev',
                    'pytest-djangoapp',
                    'pytest-stub',
                    'deluge-webapi',
                    'uwsgiconf',
                    'dbf_light',
                    'deflacue',
                    'letmehear',
                    'mednsktest',
                    'vininfo',
                    'steampak',
                    'keybind',
                    'envbox',
                    'srptools',
                    'pycbrf',
                    'pytakeout',
                    'pysyge',
                    'pypusher',
                    'diadump',
                    'torrt',
                    'torrentool',
                    'makeapp',
                    'narrow',
                    ''
                ],
                owner = 'idlesign';

            function getBadge(realm, appname, link) {
                return '<a href="https://' + link + '"><img src="https://img.shields.io/' + realm + '/' + appname + '.svg?style=flat-square"></a>';
            }

            function getRepoLink(appname) {
                return '<a href="https://github.com/' + owner + '/' + appname + '/">' + appname + '</a>';
            }

            function generateTableData(apps) {
                var data = [];

                $.each(apps, function(idx, appname){
                    if (appname) {
                        data.push([
                            getRepoLink(appname),
                            getBadge('pypi/dm', appname, 'pypi.org/project/' + appname),
                            getBadge('github/contributors/' + owner, appname, 'github.com/' + owner + '/' + appname + '/graphs/contributors'),
                            getBadge('github/issues/' + owner, appname, 'github.com/' + owner + '/' + appname + '/issues'),
                            getBadge('github/stars/' + owner, appname, 'github.com/' + owner + '/' + appname + '/stargazers'),
                            getBadge('github/forks/' + owner, appname, 'github.com/' + owner + '/' + appname + '/network/members'),
                            getBadge('github/last-commit/' + owner, appname, 'github.com/' + owner + '/' + appname),
                            getBadge('librariesio/sourcerank/pypi/', appname, 'libraries.io/github/' + owner + '/' + appname + '/sourcerank'),
                            getBadge('librariesio/dependent-repos/pypi/', appname, 'libraries.io/github/' + owner + '/' + appname),
                        ]);
                    }
                });

                return data;
            }

            $('#table-apps').DataTable({
                data: generateTableData(apps),
                paging: false,
                columns: [
                    { title: 'Title' },
                    { title: 'PyPI' },
                    { title: 'Contributors' },
                    { title: 'Issues' },
                    { title: 'Stars' },
                    { title: 'Forks' },
                    { title: 'Commit' },
                    { title: 'Rank' },
                    { title: 'Dependents' },
                ]
            });

        });

    </script>

</body>
</html>
